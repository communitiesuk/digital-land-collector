PUBLICATIONS=\
   data/publication/green-belt.md\
   data/publication/historic-landfill.md\
   data/publication/lambeth-wards.md\
   data/publication/local-authority-districts.md\
   data/publication/mayoral-development-corporation-boundary.md\
   data/publication/national-park-boundary.md\
   data/publication/uk-ward-boundary.md\
   data/publication/tree-preservation-order/tree-preservation-order-1.md\
   data/publication/tree-preservation-order/tree-preservation-order-2.md\
   data/publication/tree-preservation-order/tree-preservation-order-4.md\
   data/publication/tree-preservation-order/tree-preservation-order-5.md\
   data/publication/tree-preservation-order/tree-preservation-order-7.md\
   data/publication/tree-preservation-order/tree-preservation-order-BAN.md\
   data/publication/tree-preservation-order/tree-preservation-order-BAR.md\
   data/publication/tree-preservation-order/tree-preservation-order-BAS.md\
   data/publication/tree-preservation-order/tree-preservation-order-BLA.md\
   data/publication/tree-preservation-order/tree-preservation-order-BOL.md\
   data/publication/tree-preservation-order/tree-preservation-order-BPL.md\
   data/publication/tree-preservation-order/tree-preservation-order-BST.md\
   data/publication/tree-preservation-order/tree-preservation-order-CAR.md\
   data/publication/tree-preservation-order/tree-preservation-order-CHC.md\
   data/publication/tree-preservation-order/tree-preservation-order-CHE.md\
   data/publication/tree-preservation-order/tree-preservation-order-CON.md\
   data/publication/tree-preservation-order/tree-preservation-order-COP.md\
   data/publication/tree-preservation-order/tree-preservation-order-DAV.md\
   data/publication/tree-preservation-order/tree-preservation-order-EDO.md\
   data/publication/tree-preservation-order/tree-preservation-order-EPS.md\
   data/publication/tree-preservation-order/tree-preservation-order-FOR.md\
   data/publication/tree-preservation-order/tree-preservation-order-HAA.md\
   data/publication/tree-preservation-order/tree-preservation-order-HAL.md\
   data/publication/tree-preservation-order/tree-preservation-order-HCK.md\
   data/publication/tree-preservation-order/tree-preservation-order-KET.md\
   data/publication/tree-preservation-order/tree-preservation-order-KWL.md\
   data/publication/tree-preservation-order/tree-preservation-order-LIF.md\
   data/publication/tree-preservation-order/tree-preservation-order-LND.md\
   data/publication/tree-preservation-order/tree-preservation-order-MDE.md\
   data/publication/tree-preservation-order/tree-preservation-order-MIK.md\
   data/publication/tree-preservation-order/tree-preservation-order-MSS.md\
   data/publication/tree-preservation-order/tree-preservation-order-NDE.md\
   data/publication/tree-preservation-order/tree-preservation-order-NNO.md\
   data/publication/tree-preservation-order/tree-preservation-order-OLD.md\
   data/publication/tree-preservation-order/tree-preservation-order-RCC.md\
   data/publication/tree-preservation-order/tree-preservation-order-RIB.md\
   data/publication/tree-preservation-order/tree-preservation-order-ROH.md\
   data/publication/tree-preservation-order/tree-preservation-order-RUN.md\
   data/publication/tree-preservation-order/tree-preservation-order-SCA.md\
   data/publication/tree-preservation-order/tree-preservation-order-SCE.md\
   data/publication/tree-preservation-order/tree-preservation-order-SED.md\
   data/publication/tree-preservation-order/tree-preservation-order-SEV.md\
   data/publication/tree-preservation-order/tree-preservation-order-SLF.md\
   data/publication/tree-preservation-order/tree-preservation-order-SWD.md\
   data/publication/tree-preservation-order/tree-preservation-order-TFW.md\
   data/publication/tree-preservation-order/tree-preservation-order-TUN.md\
   data/publication/tree-preservation-order/tree-preservation-order-WBK.md\
   data/publication/tree-preservation-order/tree-preservation-order-WGN.md\
   data/publication/tree-preservation-order/tree-preservation-order-WYO.md\
   data/publication/tree-preservation-order/tree-preservation-order-YOR.md\
   data/publication/listed-buildings/listed-buildings-GRY.md

FEATURES=\
   data/feature/green-belt.geojson\
   data/feature/historic-landfill.geojson\
   data/feature/lambeth-wards.geojson\
   data/feature/local-authority-districts.geojson\
   data/feature/mayoral-development-corporation-boundary.geojson\
   data/feature/national-park-boundary.geojson\
   data/feature/uk-ward-boundary.geojson\
   data/feature/tree-preservation-order-1.geojson\
   data/feature/tree-preservation-order-2.geojson\
   data/feature/tree-preservation-order-4.geojson\
   data/feature/tree-preservation-order-5.geojson\
   data/feature/tree-preservation-order-7.geojson\
   data/feature/tree-preservation-order-BAN.geojson\
   data/feature/tree-preservation-order-BAR.geojson\
   data/feature/tree-preservation-order-BAS.geojson\
   data/feature/tree-preservation-order-BLA.geojson\
   data/feature/tree-preservation-order-BOL.geojson\
   data/feature/tree-preservation-order-BPL.geojson\
   data/feature/tree-preservation-order-BST.geojson\
   data/feature/tree-preservation-order-CAR.geojson\
   data/feature/tree-preservation-order-CHC.geojson\
   data/feature/tree-preservation-order-CHE.geojson\
   data/feature/tree-preservation-order-CON.geojson\
   data/feature/tree-preservation-order-COP.geojson\
   data/feature/tree-preservation-order-DAV.geojson\
   data/feature/tree-preservation-order-EDO.geojson\
   data/feature/tree-preservation-order-EPS.geojson\
   data/feature/tree-preservation-order-FOR.geojson\
   data/feature/tree-preservation-order-HAA.geojson\
   data/feature/tree-preservation-order-HAL.geojson\
   data/feature/tree-preservation-order-HCK.geojson\
   data/feature/tree-preservation-order-KET.geojson\
   data/feature/tree-preservation-order-LND.geojson\
   data/feature/tree-preservation-order-MDE.geojson\
   data/feature/tree-preservation-order-MIK.geojson\
   data/feature/tree-preservation-order-MSS.geojson\
   data/feature/tree-preservation-order-NDE.geojson\
   data/feature/tree-preservation-order-NNO.geojson\
   data/feature/tree-preservation-order-OLD.geojson\
   data/feature/tree-preservation-order-RCC.geojson\
   data/feature/tree-preservation-order-RIB.geojson\
   data/feature/tree-preservation-order-RUN.geojson\
   data/feature/tree-preservation-order-SCA.geojson\
   data/feature/tree-preservation-order-SCE.geojson\
   data/feature/tree-preservation-order-SED.geojson\
   data/feature/tree-preservation-order-SEV.geojson\
   data/feature/tree-preservation-order-SLF.geojson\
   data/feature/tree-preservation-order-SWD.geojson\
   data/feature/tree-preservation-order-TFW.geojson\
   data/feature/tree-preservation-order-TUN.geojson\
   data/feature/tree-preservation-order-WBK.geojson\
   data/feature/tree-preservation-order-WGN.geojson\
   data/feature/tree-preservation-order-WYO.geojson\
   data/feature/tree-preservation-order-YOR.geojson\
   data/feature/listed-buildings-GRY.geojson

var/cache/green-belt.zip:
	@mkdir -p var/cache
	curl --silent --show-error --location 'http://maps.communities.gov.uk/geoserver/dclg_inspire/ows?service=WFS&version=2.0.0&request=GetFeature&typeName=dclg_inspire:Local_Authority_Greenbelt_boundaries_2016-17&outputFormat=shape-zip&srsName=EPSG:4326' > $@

data/feature/green-belt.geojson:	var/geojson/green-belt.geojson lib/geojson.py
	@mkdir -p data/feature
	python3 lib/geojson.py 'green-belt' '' < var/geojson/green-belt.geojson > $@


var/geojson/green-belt.geojson:	var/cache/green-belt.zip
	@mkdir -p var/geojson
	ogr2ogr -f geojson -t_srs EPSG:4326 $@ /vsizip/var/cache/green-belt.zip/Local_Authority_Greenbelt_boundaries_2016-17.shp


var/cache/historic-landfill.gml:
	@mkdir -p var/cache
	curl --silent --show-error --location 'http://www.geostore.com/OGC/OGCInterface;jsessionid=JJ7Qf4H4jNTPSzkZ3NXRe95s?SESSIONID=-2109512248&INTERFACE=ENVIRONMENTWFS&SERVICE=WFS&REQUEST=GetFeature&VERSION=2.0.0&TYPENAMES=ms:ea_wfs_historic_landfill' > $@

data/feature/historic-landfill.geojson:	var/geojson/historic-landfill.geojson lib/geojson.py
	@mkdir -p data/feature
	python3 lib/geojson.py 'historic-landfill-site' 'hid_ref' < var/geojson/historic-landfill.geojson > $@


var/cache/lambeth-wards.geojson:
	@mkdir -p var/cache
	curl --silent --show-error --location 'https://opendata.arcgis.com/datasets/473a6365b6e54fe98b56229dd40eb79e_1.geojson' > $@

data/feature/lambeth-wards.geojson:	var/geojson/lambeth-wards.geojson lib/geojson.py
	@mkdir -p data/feature
	python3 lib/geojson.py 'lambeth-wards' 'ONS_WARD_CODE' < var/geojson/lambeth-wards.geojson > $@


var/cache/local-authority-districts.geojson:
	@mkdir -p var/cache
	curl --silent --show-error --location 'https://opendata.arcgis.com/datasets/fab4feab211c4899b602ecfbfbc420a3_1.geojson' > $@

data/feature/local-authority-districts.geojson:	var/geojson/local-authority-districts.geojson lib/geojson.py
	@mkdir -p data/feature
	python3 lib/geojson.py 'local-authority-boundary' 'lad17cd' < var/geojson/local-authority-districts.geojson > $@


var/cache/mayoral-development-corporation-boundary.zip:
	@mkdir -p var/cache
	curl --silent --show-error --location 'https://files.datapress.com/london/dataset/mayoral-development-corporation-boundary/mdc-boundary-post-consultation-shp.zip' > $@

data/feature/mayoral-development-corporation-boundary.geojson:	var/geojson/mayoral-development-corporation-boundary.geojson lib/geojson.py
	@mkdir -p data/feature
	python3 lib/geojson.py 'statistical-geography' 'npark16cd' < var/geojson/mayoral-development-corporation-boundary.geojson > $@


var/geojson/mayoral-development-corporation-boundary.geojson:	var/cache/mayoral-development-corporation-boundary.zip
	@mkdir -p var/geojson
	ogr2ogr -f geojson -t_srs EPSG:4326 $@ /vsizip/var/cache/mayoral-development-corporation-boundary.zip/mdc-boundary-post-consultation.shp


var/cache/national-park-boundary.geojson:
	@mkdir -p var/cache
	curl --silent --show-error --location 'http://geoportal1-ons.opendata.arcgis.com/datasets/df607d4ffa124cdca8317e3e63d45d78_1.geojson' > $@

data/feature/national-park-boundary.geojson:	var/geojson/national-park-boundary.geojson lib/geojson.py
	@mkdir -p data/feature
	python3 lib/geojson.py 'national-park-boundary' 'npark16cd' < var/geojson/national-park-boundary.geojson > $@


var/cache/uk-ward-boundary.geojson:
	@mkdir -p var/cache
	curl --silent --show-error --location 'https://opendata.arcgis.com/datasets/afcc88affe5f450e9c03970b237a7999_1.geojson' > $@

data/feature/uk-ward-boundary.geojson:	var/geojson/uk-ward-boundary.geojson lib/geojson.py
	@mkdir -p data/feature
	python3 lib/geojson.py 'ward-boundary' 'wd16cd' < var/geojson/uk-ward-boundary.geojson > $@


var/cache/tree-preservation-order-1.gml:
	@mkdir -p var/cache
	curl --silent --show-error --location 'http://inspire.misoportal.com/geoserver/peak_district_national_park_pdnpa-tpo-area/wfs?service=wfs&version=2.0.0&request=GetFeature&typename=peak_district_national_park_pdnpa-tpo-area:peak_district_national_park_pdnpa-tpo-area&outputFormat=GML2' > $@

data/feature/tree-preservation-order-1.geojson:	var/geojson/tree-preservation-order-1.geojson lib/geojson.py
	@mkdir -p data/feature
	python3 lib/geojson.py 'tree-preservation-order:1' 'None' < var/geojson/tree-preservation-order-1.geojson > $@


var/geojson/tree-preservation-order-1.geojson:	var/cache/tree-preservation-order-1.gml
	@mkdir -p var/geojson
	ogr2ogr -f geojson -s_srs EPSG:27700 -t_srs EPSG:4326 $@ var/cache/tree-preservation-order-1.gml


var/cache/tree-preservation-order-2.zip:
	@mkdir -p var/cache
	curl --silent --show-error --location 'http://inspire.nationalparks.gov.uk/geoserver/ldnpa_inspire/ows?service=WFS&request=GetFeature&version=2.0.0&typeName=ldnpa_inspire:LDNPA_Tree_Preservation_Orders&outputFormat=shape-zip' > $@

data/feature/tree-preservation-order-2.geojson:	var/geojson/tree-preservation-order-2.geojson lib/geojson.py
	@mkdir -p data/feature
	python3 lib/geojson.py 'tree-preservation-order:2' 'None' < var/geojson/tree-preservation-order-2.geojson > $@


var/geojson/tree-preservation-order-2.geojson:	var/cache/tree-preservation-order-2.zip
	@mkdir -p var/geojson
	ogr2ogr -f geojson -t_srs EPSG:4326 $@ /vsizip/var/cache/tree-preservation-order-2.zip/LDNPA_Tree_Preservation_OrdersPolygon.shp


var/cache/tree-preservation-order-4.gml:
	@mkdir -p var/cache
	curl --silent --show-error --location 'http://inspire.nationalparks.gov.uk/geoserver/nymnpa_inspire/ows?service=WFS&request=GetFeature&typename=nymnpa_inspire:nymnpa-tpo_areas&outputFormat=GML2' > $@

data/feature/tree-preservation-order-4.geojson:	var/geojson/tree-preservation-order-4.geojson lib/geojson.py
	@mkdir -p data/feature
	python3 lib/geojson.py 'tree-preservation-order:4' 'None' < var/geojson/tree-preservation-order-4.geojson > $@


var/cache/tree-preservation-order-5.gml:
	@mkdir -p var/cache
	curl --silent --show-error --location 'http://inspire.nationalparks.gov.uk/geoserver/ydnpa_inspire/ows?service=WFS&request=GetFeature&typename=ydnpa_inspire:ydnpa_tpo&outputFormat=GML2' > $@

data/feature/tree-preservation-order-5.geojson:	var/geojson/tree-preservation-order-5.geojson lib/geojson.py
	@mkdir -p data/feature
	python3 lib/geojson.py 'tree-preservation-order:5' 'None' < var/geojson/tree-preservation-order-5.geojson > $@


var/cache/tree-preservation-order-7.gml:
	@mkdir -p var/cache
	curl --silent --show-error --location 'http://inspire.nationalparks.gov.uk/geoserver/nnpa_inspire/ows?service=WFS&request=GetFeature&typename=nnpa_inspire:nnpa_tpo&outputFormat=GML2' > $@

data/feature/tree-preservation-order-7.geojson:	var/geojson/tree-preservation-order-7.geojson lib/geojson.py
	@mkdir -p data/feature
	python3 lib/geojson.py 'tree-preservation-order:7' 'None' < var/geojson/tree-preservation-order-7.geojson > $@


var/cache/tree-preservation-order-BAN.gml:
	@mkdir -p var/cache
	curl --silent --show-error --location 'http://inspire.misoportal.com/geoserver/basingstoke_deane_borough_council_tpo_area/wfs?service=wfs&version=2.0.0&request=GetFeature&typename=basingstoke_deane_borough_council_tpo_area:basingstoke_deane_borough_council_tpo_area&outputFormat=GML2' > $@

data/feature/tree-preservation-order-BAN.geojson:	var/geojson/tree-preservation-order-BAN.geojson lib/geojson.py
	@mkdir -p data/feature
	python3 lib/geojson.py 'tree-preservation-order:BAN' 'None' < var/geojson/tree-preservation-order-BAN.geojson > $@


var/cache/tree-preservation-order-BAR.gml:
	@mkdir -p var/cache
	curl --silent --show-error --location 'https://webgis1.barrowbc.gov.uk/inspire/wfs?service=WFS&version=2.0.0&request=GetFeature&typeName=INSPIRE:TPOS&outputFormat=GML32' > $@

data/feature/tree-preservation-order-BAR.geojson:	var/geojson/tree-preservation-order-BAR.geojson lib/geojson.py
	@mkdir -p data/feature
	python3 lib/geojson.py 'tree-preservation-order:BAR' 'None' < var/geojson/tree-preservation-order-BAR.geojson > $@


var/cache/tree-preservation-order-BAS.gml:
	@mkdir -p var/cache
	curl --silent --show-error --location 'http://feeds.getmapping.com/665.wfsx?service=wfs&version=1.0.0&request=getcapabilities&typename=TPOS&outputFormat=GML2' > $@

data/feature/tree-preservation-order-BAS.geojson:	var/geojson/tree-preservation-order-BAS.geojson lib/geojson.py
	@mkdir -p data/feature
	python3 lib/geojson.py 'tree-preservation-order:BAS' 'None' < var/geojson/tree-preservation-order-BAS.geojson > $@


var/cache/tree-preservation-order-BLA.gml:
	@mkdir -p var/cache
	curl --silent --show-error --location 'http://w3.blaby.gov.uk/geoserver/inspire/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=inspire:tree_preservation_orders&maxFeatures=50&outputFormat=application%2Fgml%2Bxml%3B+version%3D3.2' > $@

data/feature/tree-preservation-order-BLA.geojson:	var/geojson/tree-preservation-order-BLA.geojson lib/geojson.py
	@mkdir -p data/feature
	python3 lib/geojson.py 'tree-preservation-order:BLA' 'None' < var/geojson/tree-preservation-order-BLA.geojson > $@


var/cache/tree-preservation-order-BOL.gml:
	@mkdir -p var/cache
	curl --silent --show-error --location 'https://maps.bolton.gov.uk/residents/getows.ashx?mapsource=Bolton/inspire&TypeName=tpo&version=1.0.0&request=GetFeature&service=WFS&outputFormat=GML2' > $@

data/feature/tree-preservation-order-BOL.geojson:	var/geojson/tree-preservation-order-BOL.geojson lib/geojson.py
	@mkdir -p data/feature
	python3 lib/geojson.py 'tree-preservation-order:BOL' 'None' < var/geojson/tree-preservation-order-BOL.geojson > $@


var/cache/tree-preservation-order-BPL.gml:
	@mkdir -p var/cache
	curl --silent --show-error --location 'https://w3.blackpool.gov.uk/geoserver/inspire/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=inspire:tpo&maxFeatures=50&outputFormat=application%2Fgml%2Bxml%3B+version%3D3.2' > $@

data/feature/tree-preservation-order-BPL.geojson:	var/geojson/tree-preservation-order-BPL.geojson lib/geojson.py
	@mkdir -p data/feature
	python3 lib/geojson.py 'tree-preservation-order:BPL' 'None' < var/geojson/tree-preservation-order-BPL.geojson > $@


var/geojson/tree-preservation-order-BPL.geojson:	var/cache/tree-preservation-order-BPL.gml
	@mkdir -p var/geojson
	ogr2ogr -f geojson -s_srs EPSG:27700 -t_srs EPSG:4326 $@ var/cache/tree-preservation-order-BPL.gml


var/cache/tree-preservation-order-BST.gml:
	@mkdir -p var/cache
	curl --silent --show-error --location 'http://maps.bristol.gov.uk/arcgis/services/ext/INSPIRE/MapServer/WFSServer?service=WFS&request=GetFeature&typename=INSPIREWFS:Tree_preservation_order_-_trunk&outputFormat=GML2' > $@

data/feature/tree-preservation-order-BST.geojson:	var/geojson/tree-preservation-order-BST.geojson lib/geojson.py
	@mkdir -p data/feature
	python3 lib/geojson.py 'tree-preservation-order:BST' 'None' < var/geojson/tree-preservation-order-BST.geojson > $@


var/cache/tree-preservation-order-CAR.gml:
	@mkdir -p var/cache
	curl --silent --show-error --location 'http://maps.carlisle.gov.uk/getows.ashx?mapsource=CCC/inspire&TypeName=tpogroups&version=1.1.0&request=GetFeature&service=WFS&outputFormat=GML2' > $@

data/feature/tree-preservation-order-CAR.geojson:	var/geojson/tree-preservation-order-CAR.geojson lib/geojson.py
	@mkdir -p data/feature
	python3 lib/geojson.py 'tree-preservation-order:CAR' 'None' < var/geojson/tree-preservation-order-CAR.geojson > $@


var/cache/tree-preservation-order-CHC.gml:
	@mkdir -p var/cache
	curl --silent --show-error --location 'http://geowessex.astuntechnology.com/getows.ashx?mapsource=GeoWessex/christchurchandeastdorset&service=WFS&version=1.1.0&Request=GetFeature&TypeName=cbc_tree_preservation_orders&outputFormat=GML2' > $@

data/feature/tree-preservation-order-CHC.geojson:	var/geojson/tree-preservation-order-CHC.geojson lib/geojson.py
	@mkdir -p data/feature
	python3 lib/geojson.py 'tree-preservation-order:CHC' 'None' < var/geojson/tree-preservation-order-CHC.geojson > $@


var/cache/tree-preservation-order-CHE.gml:
	@mkdir -p var/cache
	curl --silent --show-error --location 'http://maps.cheshire.gov.uk/ArcGIS/services/CE/public_wfs/MapServer/WFSServer?request=GetFeature&service=WFS&typename=CE_public_wfs:TPO_layer__live__-_Regions&outputFormat=GML2' > $@

data/feature/tree-preservation-order-CHE.geojson:	var/geojson/tree-preservation-order-CHE.geojson lib/geojson.py
	@mkdir -p data/feature
	python3 lib/geojson.py 'tree-preservation-order:CHE' 'None' < var/geojson/tree-preservation-order-CHE.geojson > $@


var/cache/tree-preservation-order-CON.gml:
	@mkdir -p var/cache
	curl --silent --show-error --location 'http://map.cornwall.gov.uk/arcgis/services/inspire/inspire_environment/MapServer/WFSServer?request=GetFeature&service=WFS&typename=inspire_inspire_environment:tree_preservation_orders_polygons&outputFormat=GML2' > $@

data/feature/tree-preservation-order-CON.geojson:	var/geojson/tree-preservation-order-CON.geojson lib/geojson.py
	@mkdir -p data/feature
	python3 lib/geojson.py 'tree-preservation-order:CON' 'None' < var/geojson/tree-preservation-order-CON.geojson > $@


var/cache/tree-preservation-order-COP.gml:
	@mkdir -p var/cache
	curl --silent --show-error --location 'http://gistch1.copelandbc.org.uk/geoserver/INSPIRE/wfs?service=WFS&version=2.0.0&request=GetFeature&typeName=INSPIRE:TPOs_PlanArea&outputFormat=GML32' > $@

data/feature/tree-preservation-order-COP.geojson:	var/geojson/tree-preservation-order-COP.geojson lib/geojson.py
	@mkdir -p data/feature
	python3 lib/geojson.py 'tree-preservation-order:COP' 'None' < var/geojson/tree-preservation-order-COP.geojson > $@


var/cache/tree-preservation-order-DAV.gml:
	@mkdir -p var/cache
	curl --silent --show-error --location 'https://feeds.getmapping.com/54236.wfsx?service=wfs&version=1.0.0&request=getcapabilities&typename=tpo_tree&outputFormat=GML2' > $@

data/feature/tree-preservation-order-DAV.geojson:	var/geojson/tree-preservation-order-DAV.geojson lib/geojson.py
	@mkdir -p data/feature
	python3 lib/geojson.py 'tree-preservation-order:DAV' 'None' < var/geojson/tree-preservation-order-DAV.geojson > $@


var/cache/tree-preservation-order-EDO.gml:
	@mkdir -p var/cache
	curl --silent --show-error --location 'http://geowessex.astuntechnology.com/getows.ashx?mapsource=GeoWessex/christchurchandeastdorset&service=WFS&version=1.1.0&Request=GetFeature&TypeName=eddc_tree_preservation_orders&outputFormat=GML2' > $@

data/feature/tree-preservation-order-EDO.geojson:	var/geojson/tree-preservation-order-EDO.geojson lib/geojson.py
	@mkdir -p data/feature
	python3 lib/geojson.py 'tree-preservation-order:EDO' 'None' < var/geojson/tree-preservation-order-EDO.geojson > $@


var/cache/tree-preservation-order-EPS.gml:
	@mkdir -p var/cache
	curl --silent --show-error --location 'http://myeebc.epsom-ewell.gov.uk/getOWS.ashx?MapSource=EEBC/inspire&service=WFS&version=1.1.0&request=GetFeature&TypeName=TPO&outputFormat=GML2' > $@

data/feature/tree-preservation-order-EPS.geojson:	var/geojson/tree-preservation-order-EPS.geojson lib/geojson.py
	@mkdir -p data/feature
	python3 lib/geojson.py 'tree-preservation-order:EPS' 'None' < var/geojson/tree-preservation-order-EPS.geojson > $@


var/cache/tree-preservation-order-FOR.gml:
	@mkdir -p var/cache
	curl --silent --show-error --location 'http://maps.westsuffolk.gov.uk/GetOWS.ashx?VERSION=1.1.0&MAPSOURCE=WestSuffolk/INSPIRE&REQUEST=GetFeature&SERVICE=WFS&typename=tpo&outputFormat=GML2' > $@

data/feature/tree-preservation-order-FOR.geojson:	var/geojson/tree-preservation-order-FOR.geojson lib/geojson.py
	@mkdir -p data/feature
	python3 lib/geojson.py 'tree-preservation-order:FOR' 'None' < var/geojson/tree-preservation-order-FOR.geojson > $@


var/cache/tree-preservation-order-HAA.gml:
	@mkdir -p var/cache
	curl --silent --show-error --location 'http://inspire.misoportal.com/geoserver/havant_borough_council_havant_tpo/wfs?service=wfs&version=2.0.0&request=GetFeature&typename=havant_borough_council_havant_tpo:havant_borough_council_havant_tpo&outputFormat=GML2' > $@

data/feature/tree-preservation-order-HAA.geojson:	var/geojson/tree-preservation-order-HAA.geojson lib/geojson.py
	@mkdir -p data/feature
	python3 lib/geojson.py 'tree-preservation-order:HAA' 'None' < var/geojson/tree-preservation-order-HAA.geojson > $@


var/cache/tree-preservation-order-HAL.gml:
	@mkdir -p var/cache
	curl --silent --show-error --location 'http://inspire.halton.gov.uk/geoserver/wfs?service=WFS&request=GetFeature&typename=inspire:tree_preservation_orders_polygon&outputFormat=GML2' > $@

data/feature/tree-preservation-order-HAL.geojson:	var/geojson/tree-preservation-order-HAL.geojson lib/geojson.py
	@mkdir -p data/feature
	python3 lib/geojson.py 'tree-preservation-order:HAL' 'None' < var/geojson/tree-preservation-order-HAL.geojson > $@


var/cache/tree-preservation-order-HCK.kml:
	@mkdir -p var/cache
	curl --silent --show-error --location 'https://map.hackney.gov.uk/geoserver/wms/kml?mode=download&layers=lbhdesign:Tree%20Preservation%20Orders%20Points' > $@

data/feature/tree-preservation-order-HCK.geojson:	var/geojson/tree-preservation-order-HCK.geojson lib/geojson.py
	@mkdir -p data/feature
	python3 lib/geojson.py 'tree-preservation-order:HCK' 'None' < var/geojson/tree-preservation-order-HCK.geojson > $@


var/cache/tree-preservation-order-KET.gml:
	@mkdir -p var/cache
	curl --silent --show-error --location 'http://maps.kettering.gov.uk/inspirewfs/wfs.impl?service=wfs&version=2.0.0&request=GetFeature&typenames=KBC:Tree_Preservation_Orders&outputFormat=GML2' > $@

data/feature/tree-preservation-order-KET.geojson:	var/geojson/tree-preservation-order-KET.geojson lib/geojson.py
	@mkdir -p data/feature
	python3 lib/geojson.py 'tree-preservation-order:KET' 'None' < var/geojson/tree-preservation-order-KET.geojson > $@


var/cache/tree-preservation-order-LND.gml:
	@mkdir -p var/cache
	curl --silent --show-error --location 'http://www.mapping2.cityoflondon.gov.uk/arcgis/services/INSPIRE/MapServer/WFSServer?Request=GetFeature&typename=INSPIRE:Tree_Preservation_Orders&outputFormat=GML2' > $@

data/feature/tree-preservation-order-LND.geojson:	var/geojson/tree-preservation-order-LND.geojson lib/geojson.py
	@mkdir -p data/feature
	python3 lib/geojson.py 'tree-preservation-order:LND' 'None' < var/geojson/tree-preservation-order-LND.geojson > $@


var/cache/tree-preservation-order-MDE.zip:
	@mkdir -p var/cache
	curl --silent --show-error --location 'https://maps.middevon.gov.uk/geoserver/Inspire/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=Inspire:TPOpolygons&maxFeatures=50&outputFormat=shape-zip' > $@

data/feature/tree-preservation-order-MDE.geojson:	var/geojson/tree-preservation-order-MDE.geojson lib/geojson.py
	@mkdir -p data/feature
	python3 lib/geojson.py 'tree-preservation-order:MDE' 'None' < var/geojson/tree-preservation-order-MDE.geojson > $@


var/geojson/tree-preservation-order-MDE.geojson:	var/cache/tree-preservation-order-MDE.zip
	@mkdir -p var/geojson
	ogr2ogr -f geojson -t_srs EPSG:4326 $@ /vsizip/var/cache/tree-preservation-order-MDE.zip/TPOpolygons.shp


var/cache/tree-preservation-order-MIK.gml:
	@mkdir -p var/cache
	curl --silent --show-error --location 'http://mapping.milton-keynes.gov.uk/GetOWS.ashx?MAPSOURCE=MiltonKeynes/inspire&version=1.1.0&request=GetFeature&service=WFS&TypeName=tpo_regions&outputFormat=GML2' > $@

data/feature/tree-preservation-order-MIK.geojson:	var/geojson/tree-preservation-order-MIK.geojson lib/geojson.py
	@mkdir -p data/feature
	python3 lib/geojson.py 'tree-preservation-order:MIK' 'None' < var/geojson/tree-preservation-order-MIK.geojson > $@


var/cache/tree-preservation-order-MSS.gml:
	@mkdir -p var/cache
	curl --silent --show-error --location 'http://inspire.misoportal.com/geoserver/mid_sussex_district_council_msdc_3830_tpo_point/wfs?service=wfs&version=2.0.0&request=GetFeature&typename=mid_sussex_district_council_msdc_3830_tpo_point:mid_sussex_district_council_msdc_3830_tpo_point&outputFormat=GML2' > $@

data/feature/tree-preservation-order-MSS.geojson:	var/geojson/tree-preservation-order-MSS.geojson lib/geojson.py
	@mkdir -p data/feature
	python3 lib/geojson.py 'tree-preservation-order:MSS' 'None' < var/geojson/tree-preservation-order-MSS.geojson > $@


var/cache/tree-preservation-order-NDE.gml:
	@mkdir -p var/cache
	curl --silent --show-error --location 'http://inspire.northdevon.gov.uk/geoserver/ows?service=wfs&version=2.0.0&request=GetFeature&typename=Inspire:Tree_Preservation_Orders&outputFormat=GML2' > $@

data/feature/tree-preservation-order-NDE.geojson:	var/geojson/tree-preservation-order-NDE.geojson lib/geojson.py
	@mkdir -p data/feature
	python3 lib/geojson.py 'tree-preservation-order:NDE' 'None' < var/geojson/tree-preservation-order-NDE.geojson > $@


var/cache/tree-preservation-order-NNO.kml:
	@mkdir -p var/cache
	curl --silent --show-error --location 'http://maps.norfolk.gov.uk/inspire/data/north_norfolk_district_council/TreePreservationOrders/NNDC_Tree_Preservation_Orders.kml' > $@

data/feature/tree-preservation-order-NNO.geojson:	var/geojson/tree-preservation-order-NNO.geojson lib/geojson.py
	@mkdir -p data/feature
	python3 lib/geojson.py 'tree-preservation-order:NNO' 'None' < var/geojson/tree-preservation-order-NNO.geojson > $@


var/cache/tree-preservation-order-OLD.gml:
	@mkdir -p var/cache
	curl --silent --show-error --location 'http://inspire.oldham.gov.uk:8080/geoserver/wfs?service=WFS&request=GetFeature&typename=Oldham:Tree_Preservation_Order&outputFormat=GML2' > $@

data/feature/tree-preservation-order-OLD.geojson:	var/geojson/tree-preservation-order-OLD.geojson lib/geojson.py
	@mkdir -p data/feature
	python3 lib/geojson.py 'tree-preservation-order:OLD' 'None' < var/geojson/tree-preservation-order-OLD.geojson > $@


var/cache/tree-preservation-order-RCC.gml:
	@mkdir -p var/cache
	curl --silent --show-error --location 'http://inspire.redcar-cleveland.gov.uk/geoserver/RCBC_INSPIRE_WFS/wfs?request=getfeature&version=2.0.0&typeName=RCBC_INSPIRE_WFS:RCBC-TPO&outputformat=GML32' > $@

data/feature/tree-preservation-order-RCC.geojson:	var/geojson/tree-preservation-order-RCC.geojson lib/geojson.py
	@mkdir -p data/feature
	python3 lib/geojson.py 'tree-preservation-order:RCC' 'None' < var/geojson/tree-preservation-order-RCC.geojson > $@


var/cache/tree-preservation-order-RIB.gml:
	@mkdir -p var/cache
	curl --silent --show-error --location 'http://inspire.ribblevalley.gov.uk/geoserver/inspire/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=inspire:tree_preservation_order&maxFeatures=50&outputFormat=application%2Fgml%2Bxml%3B+version%3D3.2' > $@

data/feature/tree-preservation-order-RIB.geojson:	var/geojson/tree-preservation-order-RIB.geojson lib/geojson.py
	@mkdir -p data/feature
	python3 lib/geojson.py 'tree-preservation-order:RIB' 'None' < var/geojson/tree-preservation-order-RIB.geojson > $@


var/cache/tree-preservation-order-RUN.zip:
	@mkdir -p var/cache
	curl --silent --show-error --location 'https://maps.runnymede.gov.uk/geoserver/wfs?service=WFS&request=GetFeature&typeName=planning:tree_preservation_orders&outputFormat=shape-zip' > $@

data/feature/tree-preservation-order-RUN.geojson:	var/geojson/tree-preservation-order-RUN.geojson lib/geojson.py
	@mkdir -p data/feature
	python3 lib/geojson.py 'tree-preservation-order:RUN' 'None' < var/geojson/tree-preservation-order-RUN.geojson > $@


var/geojson/tree-preservation-order-RUN.geojson:	var/cache/tree-preservation-order-RUN.zip
	@mkdir -p var/geojson
	ogr2ogr -f geojson -t_srs EPSG:4326 $@ /vsizip/var/cache/tree-preservation-order-RUN.zip/tree_preservation_orders.shp


var/cache/tree-preservation-order-SCA.gml:
	@mkdir -p var/cache
	curl --silent --show-error --location 'http://inspire.misoportal.com/geoserver/south_cambridgshire_tree_preservation_orders_polygon/wfs?service=wfs&version=2.0.0&request=GetFeature&typename=south_cambridgshire_tree_preservation_orders_polygon:south_cambridgshire_tree_preservation_orders_polygon&outputFormat=GML2' > $@

data/feature/tree-preservation-order-SCA.geojson:	var/geojson/tree-preservation-order-SCA.geojson lib/geojson.py
	@mkdir -p data/feature
	python3 lib/geojson.py 'tree-preservation-order:SCA' 'None' < var/geojson/tree-preservation-order-SCA.geojson > $@


var/cache/tree-preservation-order-SCE.gml:
	@mkdir -p var/cache
	curl --silent --show-error --location 'http://maps.scarborough.gov.uk/geoserver/inspire/ows?SERVICE=WFS&REQUEST=GetFeature&VERSION=2.0.0&typename=inspire:TPO_polygon&outputFormat=GML2' > $@

data/feature/tree-preservation-order-SCE.geojson:	var/geojson/tree-preservation-order-SCE.geojson lib/geojson.py
	@mkdir -p data/feature
	python3 lib/geojson.py 'tree-preservation-order:SCE' 'None' < var/geojson/tree-preservation-order-SCE.geojson > $@


var/cache/tree-preservation-order-SED.gml:
	@mkdir -p var/cache
	curl --silent --show-error --location 'http://maps.westsuffolk.gov.uk/GetOWS.ashx?VERSION=1.1.0&MAPSOURCE=WestSuffolk/INSPIRE&REQUEST=GetFeature&SERVICE=WFS&typename=tpo&outputFormat=GML2' > $@

data/feature/tree-preservation-order-SED.geojson:	var/geojson/tree-preservation-order-SED.geojson lib/geojson.py
	@mkdir -p data/feature
	python3 lib/geojson.py 'tree-preservation-order:SED' 'None' < var/geojson/tree-preservation-order-SED.geojson > $@


var/cache/tree-preservation-order-SEV.geojson:
	@mkdir -p var/cache
	curl --silent --show-error --location 'http://gisopendata-sdc.opendata.arcgis.com/datasets/3b347a126ff74237ade93b487e30f659_0.geojson' > $@

data/feature/tree-preservation-order-SEV.geojson:	var/geojson/tree-preservation-order-SEV.geojson lib/geojson.py
	@mkdir -p data/feature
	python3 lib/geojson.py 'tree-preservation-order:SEV' 'None' < var/geojson/tree-preservation-order-SEV.geojson > $@


var/cache/tree-preservation-order-SLF.gml:
	@mkdir -p var/cache
	curl --silent --show-error --location 'http://map.salford.gov.uk/geoserver/INSPIRE/ows?service=wfs&version=2.0.0&request=GetFeature&typename=INSPIRE:ENV_TPO&outputFormat=GML2' > $@

data/feature/tree-preservation-order-SLF.geojson:	var/geojson/tree-preservation-order-SLF.geojson lib/geojson.py
	@mkdir -p data/feature
	python3 lib/geojson.py 'tree-preservation-order:SLF' 'None' < var/geojson/tree-preservation-order-SLF.geojson > $@


var/cache/tree-preservation-order-SWD.gml:
	@mkdir -p var/cache
	curl --silent --show-error --location 'https://feeds.getmapping.com/46415.wfsx?service=wfs&version=1.0.0&request=getcapabilities&typename=tpo_register&outputFormat=GML2' > $@

data/feature/tree-preservation-order-SWD.geojson:	var/geojson/tree-preservation-order-SWD.geojson lib/geojson.py
	@mkdir -p data/feature
	python3 lib/geojson.py 'tree-preservation-order:SWD' 'None' < var/geojson/tree-preservation-order-SWD.geojson > $@


var/cache/tree-preservation-order-TFW.gml:
	@mkdir -p var/cache
	curl --silent --show-error --location 'http://inspire.misoportal.com/geoserver/telford_and_wrekin_coucil_tpo/wfs?service=wfs&version=2.0.0&request=GetFeature&typename=telford_and_wrekin_coucil_tpo:telford_and_wrekin_coucil_tpo&outputFormat=GML2' > $@

data/feature/tree-preservation-order-TFW.geojson:	var/geojson/tree-preservation-order-TFW.geojson lib/geojson.py
	@mkdir -p data/feature
	python3 lib/geojson.py 'tree-preservation-order:TFW' 'None' < var/geojson/tree-preservation-order-TFW.geojson > $@


var/cache/tree-preservation-order-TUN.geojson:
	@mkdir -p var/cache
	curl --silent --show-error --location 'http://opendatanew-tunbridgewells.opendata.arcgis.com/datasets/b8add41804c44aeda117263c56835ee2_0.geojson' > $@

data/feature/tree-preservation-order-TUN.geojson:	var/geojson/tree-preservation-order-TUN.geojson lib/geojson.py
	@mkdir -p data/feature
	python3 lib/geojson.py 'tree-preservation-order:TUN' 'None' < var/geojson/tree-preservation-order-TUN.geojson > $@


var/cache/tree-preservation-order-WBK.gml:
	@mkdir -p var/cache
	curl --silent --show-error --location 'http://gis1.westberks.gov.uk/arcgis/services/maps/Wbc_Inspire_Tree_Preservation_Orders/MapServer/WFSServer?Request=GetFeature&typename=maps_Wbc_Inspire_Tree_Preservation_Orders:Tree_preservation_orders&outputFormat=GML2' > $@

data/feature/tree-preservation-order-WBK.geojson:	var/geojson/tree-preservation-order-WBK.geojson lib/geojson.py
	@mkdir -p data/feature
	python3 lib/geojson.py 'tree-preservation-order:WBK' 'None' < var/geojson/tree-preservation-order-WBK.geojson > $@


var/cache/tree-preservation-order-WGN.geojson:
	@mkdir -p var/cache
	curl --silent --show-error --location 'http://opendata.wigan.gov.uk/datasets/036f4c98cdbf40e9afb7a3a76248c7c2_1.geojson' > $@

data/feature/tree-preservation-order-WGN.geojson:	var/geojson/tree-preservation-order-WGN.geojson lib/geojson.py
	@mkdir -p data/feature
	python3 lib/geojson.py 'tree-preservation-order:WGN' 'None' < var/geojson/tree-preservation-order-WGN.geojson > $@


var/cache/tree-preservation-order-WYO.gml:
	@mkdir -p var/cache
	curl --silent --show-error --location 'http://inspire.wycombe.gov.uk/getows.ashx?Mapsource=Wycombe%2FInspire&service=WFS&version=1.1.0&Request=GetFeature&TypeName=TreePreservationOrder&outputFormat=GML2' > $@

data/feature/tree-preservation-order-WYO.geojson:	var/geojson/tree-preservation-order-WYO.geojson lib/geojson.py
	@mkdir -p data/feature
	python3 lib/geojson.py 'tree-preservation-order:WYO' 'None' < var/geojson/tree-preservation-order-WYO.geojson > $@


var/cache/tree-preservation-order-YOR.geojson:
	@mkdir -p var/cache
	curl --silent --show-error --location 'https://opendata.arcgis.com/datasets/9c05ccf1ec5141d58ec9bca70cef329b_4.geojson' > $@

data/feature/tree-preservation-order-YOR.geojson:	var/geojson/tree-preservation-order-YOR.geojson lib/geojson.py
	@mkdir -p data/feature
	python3 lib/geojson.py 'tree-preservation-order:YOR' 'None' < var/geojson/tree-preservation-order-YOR.geojson > $@


var/cache/listed-buildings-GRY.kml:
	@mkdir -p var/cache
	curl --silent --show-error --location 'http://maps.norfolk.gov.uk/inspire/data/great_yarmouth_borough_council/listedbuildings/Great%20Yarmouth%20Borough%20Council%20Listed%20Buildings.kml' > $@

data/feature/listed-buildings-GRY.geojson:	var/geojson/listed-buildings-GRY.geojson lib/geojson.py
	@mkdir -p data/feature
	python3 lib/geojson.py 'listed-building' 'None' < var/geojson/listed-buildings-GRY.geojson > $@

